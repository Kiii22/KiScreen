<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoVerse: Ultimate Market & Education Hub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg: #050508;
            --card: #0f0f16;
            --card-hover: #1a1a24;
            --primary: #3b82f6;
            --accent: #8b5cf6;
            --green: #10b981;
            --red: #ef4444;
            --text: #e2e8f0;
            --text-dim: #94a3b8;
            --font-head: 'Orbitron', sans-serif;
            --font-body: 'Exo 2', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: var(--font-body);
            overflow-x: hidden
        }

        ::-webkit-scrollbar {
            width: 8px
        }

        ::-webkit-scrollbar-track {
            background: var(--bg)
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary)
        }

        .bg-fx {
            position: fixed;
            inset: 0;
            z-index: -1;
            background: radial-gradient(circle at 10% 10%, rgba(59, 130, 246, 0.1), transparent 40%), radial-gradient(circle at 90% 90%, rgba(139, 92, 246, 0.1), transparent 40%), linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 100% 100%, 100% 100%, 50px 50px, 50px 50px
        }

        .container {
            max-width: 1440px;
            margin: 0 auto;
            padding: 0 1.5rem
        }

        header {
            background: rgba(5, 5, 8, 0.9);
            backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1)
        }

        nav {
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between
        }

        .logo {
            font-family: var(--font-head);
            font-size: 1.5rem;
            font-weight: 900;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            gap: .5rem
        }

        .global-stats {
            display: flex;
            gap: 1.5rem;
            font-size: .8rem;
            color: var(--text-dim);
            display: none
        }

        @media(min-width:1024px) {
            .global-stats {
                display: flex
            }
        }

        .g-stat span {
            color: var(--green);
            font-family: var(--font-mono)
        }

        .ticker-wrap {
            overflow: hidden;
            background: var(--card);
            border-top: 1px solid #222;
            border-bottom: 1px solid #222;
            padding: 10px 0;
            white-space: nowrap;
            margin-top: 70px
        }

        .ticker {
            display: inline-block;
            animation: scroll 40s linear infinite
        }

        .ticker-item {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 0 20px;
            color: var(--text-dim);
            font-size: .9rem;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
            transition: .2s
        }

        .ticker-item:hover {
            background: #222;
            color: var(--text)
        }

        .ticker-item img {
            width: 20px;
            height: 20px
        }

        @keyframes scroll {
            0% {
                transform: translateX(0)
            }

            100% {
                transform: translateX(-50%)
            }
        }

        .dash-grid {
            display: grid;
            grid-template-columns: 300px 1fr 400px;
            gap: 1.5rem;
            margin-top: 2rem;
            padding-bottom: 3rem
        }

        @media(max-width:1200px) {
            .dash-grid {
                grid-template-columns: 1fr 400px
            }
        }

        @media(max-width:900px) {
            .dash-grid {
                grid-template-columns: 1fr
            }
        }

        .asset-list {
            background: var(--card);
            border-radius: 15px;
            border: 1px solid #222;
            height: 850px;
            overflow-y: auto
        }

        .asset-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            border-bottom: 1px solid #1a1a1a;
            cursor: pointer;
            transition: .2s
        }

        .asset-item:hover,
        .asset-item.active {
            background: var(--card-hover)
        }

        .asset-item.active {
            border-left: 3px solid var(--primary)
        }

        .asset-info {
            flex: 1
        }

        .asset-name {
            font-weight: bold;
            font-size: .95rem;
            display: block
        }

        .asset-meta {
            font-size: .75rem;
            color: var(--text-dim);
            display: flex;
            gap: 5px
        }

        .chart-area {
            background: var(--card);
            border-radius: 15px;
            border: 1px solid #222;
            padding: 1.5rem;
            display: flex;
            flex-direction: column
        }

        .coin-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem
        }

        .coin-title h2 {
            font-family: var(--font-head);
            font-size: 2rem;
            display: flex;
            align-items: center;
            gap: 10px
        }

        .coin-title span {
            font-size: 1rem;
            color: var(--text-dim);
            background: #222;
            padding: 2px 8px;
            border-radius: 5px
        }

        .live-price {
            font-size: 2.5rem;
            font-weight: 700;
            font-family: var(--font-mono);
            margin: 5px 0
        }

        .stats-row {
            display: flex;
            gap: 1.5rem;
            margin-top: 1rem;
            flex-wrap: wrap
        }

        .stat-badge {
            background: #111;
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid #222
        }

        .stat-badge small {
            display: block;
            color: var(--text-dim);
            font-size: .7rem;
            text-transform: uppercase
        }

        .stat-badge strong {
            color: var(--primary);
            font-family: var(--font-mono)
        }

        .info-panel {
            background: var(--card);
            border-radius: 15px;
            border: 1px solid #222;
            padding: 1.5rem;
            height: 850px;
            overflow-y: auto
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid #222;
            padding-bottom: 10px
        }

        .tab-btn {
            background: none;
            border: none;
            color: var(--text-dim);
            padding: 5px 10px;
            cursor: pointer;
            font-family: var(--font-head);
            transition: .2s;
            border-bottom: 2px solid transparent
        }

        .tab-btn.active {
            color: var(--primary);
            border-bottom-color: var(--primary)
        }

        /* New History Timeline Style */
        .hist-timeline {
            position: relative;
            margin-top: 1rem;
            padding-left: 15px
        }

        .hist-timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 2px;
            background: #333
        }

        .hist-event {
            margin-bottom: 1.5rem;
            position: relative;
            padding-left: 15px
        }

        .hist-event::before {
            content: '';
            position: absolute;
            left: -20px;
            top: 5px;
            width: 10px;
            height: 10px;
            background: var(--primary);
            border-radius: 50%;
            border: 2px solid var(--bg)
        }

        .hist-year {
            font-family: var(--font-mono);
            color: var(--accent);
            font-weight: bold;
            font-size: .9rem
        }

        .hist-text {
            font-size: .9rem;
            color: var(--text-dim);
            margin-top: 4px
        }

        /* New Tech Specs Grid */
        .tech-grid-new {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem
        }

        .tech-card {
            background: #15151e;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #252530
        }

        .tech-label {
            font-size: .75rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 4px
        }

        .tech-val {
            font-family: var(--font-mono);
            font-size: .95rem;
            color: var(--primary)
        }

        .tech-desc {
            font-size: .85rem;
            color: #777;
            margin-top: 5px;
            line-height: 1.4
        }

        .gauge-wrap {
            text-align: center;
            margin: 1rem 0;
            padding: 1rem;
            background: #111;
            border-radius: 10px
        }

        .signal {
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 5px
        }

        /* Technical Indicators Section */
        .indicators-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1.5rem
        }

        .indicator-card {
            background: #15151e;
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid #252530
        }

        .indicator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem
        }

        .indicator-value {
            font-family: var(--font-mono);
            font-size: 1.1rem;
            font-weight: bold
        }

        .indicator-status {
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: bold
        }

        .status-overbought {
            background: rgba(239, 68, 68, 0.2);
            color: var(--red)
        }

        .status-oversold {
            background: rgba(16, 185, 129, 0.2);
            color: var(--green)
        }

        .status-neutral {
            background: rgba(148, 163, 184, 0.2);
            color: var(--text-dim)
        }

        .volume-meter {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #222
        }

        .volume-bar {
            height: 6px;
            background: #333;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 5px
        }

        .volume-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--primary));
            border-radius: 3px
        }

        footer {
            border-top: 1px solid #222;
            padding: 3rem 0;
            margin-top: 2rem;
            text-align: center;
            color: var(--text-dim)
        }

        .up {
            color: var(--green)
        }

        .down {
            color: var(--red)
        }
    </style>
</head>

<body>
    <div class="bg-fx"></div>

    <header>
        <div class="container">
            <nav>
                <div class="logo"><i class="fas fa-cubes"></i> CRYPTOVERSE PRO</div>
                <div class="global-stats">
                    <div class="g-stat">Market Cap: <span id="g-mcap">Loading...</span></div>
                    <div class="g-stat">Vol 24h: <span id="g-vol">Loading...</span></div>
                    <div class="g-stat">BTC Dom: <span id="g-dom">Loading...</span></div>
                </div>
            </nav>
        </div>
    </header>

    <div class="ticker-wrap">
        <div class="ticker" id="ticker-bar"></div>
    </div>

    <div class="container">
        <div class="dash-grid">

            <!-- LIST -->
            <div class="asset-list" id="asset-list"></div>

            <!-- CHART -->
            <div class="chart-area">
                <div class="coin-header">
                    <div class="coin-title">
                        <h2 id="d-name"><img src="" id="d-img" style="width:40px;margin-right:10px"> <span></span></h2>
                        <div class="live-price" id="d-price">$0.00</div>
                        <div id="d-change" class="change">0.00%</div>
                    </div>
                </div>

                <div class="stats-row">
                    <div class="stat-badge"><small>Market Cap</small><strong id="d-mcap">--</strong></div>
                    <div class="stat-badge"><small>Volume (24h)</small><strong id="d-vol">--</strong></div>
                    <div class="stat-badge"><small>High (24h)</small><strong id="d-high">--</strong></div>
                    <div class="stat-badge"><small>ATH</small><strong id="d-ath">--</strong></div>
                </div>

                <div style="flex:1; margin-top:2rem; position:relative; min-height:400px">
                    <canvas id="mainChart"></canvas>
                </div>

                <div style="display:flex; justify-content:center; gap:10px; margin-top:10px">
                    <button class="tab-btn" onclick="updateChartRange(1)">24H</button>
                    <button class="tab-btn active" onclick="updateChartRange(7)">7D</button>
                    <button class="tab-btn" onclick="updateChartRange(30)">30D</button>
                    <button class="tab-btn" onclick="updateChartRange(365)">1Y</button>
                </div>
            </div>

            <!-- DEEP DIVE INFO -->
            <div class="info-panel">
                <div class="nav-tabs">
                    <button class="tab-btn active" onclick="switchTab('overview')">Ringkasan</button>
                    <button class="tab-btn" onclick="switchTab('history')">Sejarah</button>
                    <button class="tab-btn" onclick="switchTab('tech')">Teknologi</button>
                    <button class="tab-btn" onclick="switchTab('technical')">Teknikal</button>
                </div>

                <div id="tab-overview" class="info-content">
                    <div id="desc-text" style="margin-bottom:2rem; line-height:1.6; color:#ccc"></div>

                    <h3>Indikator Teknikal (Live Est.)</h3>
                    <div class="gauge-wrap">
                        <div style="font-size:.8rem; color:#888">Sinyal Pasar</div>
                        <div class="signal" id="tech-signal">NEUTRAL</div>
                        <div style="font-size:.7rem; margin-top:5px" id="tech-reason">Calculating...</div>
                        <div
                            style="margin-top:10px; display:flex; gap:5px; height:4px; border-radius:2px; overflow:hidden">
                            <div style="flex:1; background:var(--red); opacity:0.5" id="bar-sell"></div>
                            <div style="flex:1; background:#555" id="bar-neutral"></div>
                            <div style="flex:1; background:var(--green); opacity:0.5" id="bar-buy"></div>
                        </div>
                    </div>
                </div>

                <div id="tab-history" class="info-content" style="display:none">
                    <div class="hist-timeline" id="history-container"></div>
                </div>

                <div id="tab-tech" class="info-content" style="display:none">
                    <div class="tech-grid-new" id="tech-container"></div>
                </div>

                <div id="tab-technical" class="info-content" style="display:none">
                    <div class="indicators-grid" id="technical-container"></div>
                    
                    <div class="volume-meter">
                        <div style="display:flex; justify-content:space-between">
                            <small>Volume (24h)</small>
                            <small id="volume-value">--</small>
                        </div>
                        <div class="volume-bar">
                            <div class="volume-fill" id="volume-bar" style="width:50%"></div>
                        </div>
                    </div>
                    
                    <h4 style="margin-top:1.5rem; margin-bottom:0.5rem">Moving Averages (Weekly)</h4>
                    <div class="tech-grid-new" id="ema-container"></div>
                </div>
            </div>

        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2026 CryptoVerse Pro. Expert Analysis & Data.</p>
        </div>
    </footer>

    <script>
        // === COMPREHENSIVE DATABASE ===
        const COIN_DB = {
            'bitcoin': {
                history: [
                    { y: "2008", t: "Satoshi Nakamoto menerbitkan whitepaper 'Peer-to-Peer Electronic Cash System'." },
                    { y: "2009", t: "Genesis Block ditambang (3 Jan). Transaksi pertama ke Hal Finney." },
                    { y: "2010", t: "Bitcoin Pizza Day: 10,000 BTC untuk 2 pizza (transaksi komersial pertama)." },
                    { y: "2013", t: "Harga menembus $1,000 untuk pertama kalinya. Mt. Gox hack terjadi setahun kemudian." },
                    { y: "2017", t: "Upgrade SegWit diaktifkan. Hard fork Bitcoin Cash. Harga menyentuh $20,000." },
                    { y: "2021", t: "Upgrade Taproot (Privasi & Smart Contract). El Salvador mengadopsi sebagai Legal Tender." },
                    { y: "2024", t: "SEC AS menyetujui Spot Bitcoin ETF. Halving ke-4 mengurangi reward blok menjadi 3.125 BTC." }
                ],
                tech: [
                    { l: "Konsensus", v: "Proof-of-Work (PoW)", d: "Menggunakan energi komputasi untuk mengamankan jaringan (Mining)." },
                    { l: "Algoritma", v: "SHA-256", d: "Standar keamanan tingkat militer yang digunakan NSA." },
                    { l: "Model Akun", v: "UTXO", d: "Unspent Transaction Output: Lebih aman dan privat dibanding model saldo." },
                    { l: "Skalabilitas", v: "Lightning Network", d: "Solusi Layer-2 untuk transaksi instan dan mikro." },
                    { l: "Supply", v: "Hard Cap 21 Juta", d: "Bersifat deflasi. Terprogram secara matematis tidak bisa ditambah." }
                ]
            },
            'ethereum': {
                history: [
                    { y: "2013", t: "Vitalik Buterin mengusulkan Ethereum untuk menutupi kelemahan Bitcoin." },
                    { y: "2015", t: "Mainnet 'Frontier' diluncurkan. Era Smart Contract dimulai." },
                    { y: "2016", t: "Insiden The DAO Hack senilai $50M, menyebabkan hard fork menjadi Ethereum (ETH) dan Ethereum Classic (ETC)." },
                    { y: "2017", t: "Era ICO Boom: Ribuan token diluncurkan di atas jaringan ERC-20." },
                    { y: "2020", t: "Beacon Chain (Layer PoS) diluncurkan, memulai fase ETH 2.0." },
                    { y: "2022", t: "The Merge: Ethereum sukses beralih dari PoW ke Proof-of-Stake, mengurangi energi 99.9%." },
                    { y: "2024", t: "Upgrade Dencun: Memperkenalkan 'Blobs' (EIP-4844) untuk menurunkan biaya transaksi Layer-2." }
                ],
                tech: [
                    { l: "Konsensus", v: "Proof-of-Stake (PoS)", d: "Validator staking 32 ETH untuk mengamankan jaringan." },
                    { l: "Virtual Machine", v: "EVM", d: "Komputer global yang menjalankan Smart Contracts secara terdesentralisasi." },
                    { l: "Bahasa", v: "Solidity, Vyper", d: "Bahasa pemrograman utama untuk menulis DApps." },
                    { l: "Ekosistem", v: "DeFi & NFT Hub", d: "Rumah bagi mayoritas aplikasi keuangan terdesentralisasi." },
                    { l: "Issuance", v: "Ultrasound Money", d: "Mekanisme burning EIP-1559 membuat supply bisa menjadi deflasi saat jaringan sibuk." }
                ]
            },
            'solana': {
                history: [
                    { y: "2017", t: "Anatoly Yakovenko merilis draft tentang Proof of History (PoH)." },
                    { y: "2020", t: "Mainnet Beta diluncurkan. Dikenal sebagai 'Ethereum Killer' karena kecepatan tinggi." },
                    { y: "2021", t: "Harga melonjak dari $1.5 ke $260 didorong oleh kegilaan NFT (Degenerate Ape, dll)." },
                    { y: "2022", t: "Krisis FTX (pendukung utama Solana) menyebabkan harga jatuh hingga $8. Komunitas tetap bertahan." },
                    { y: "2023", t: "Bermitra dengan Visa untuk settlement stablecoin USDC." },
                    { y: "2024", t: "Memecoin mania dan airdrop (Jupiter, Pyth) menghidupkan kembali ekosistem Solana." }
                ],
                tech: [
                    { l: "Inovasi Utama", v: "Proof of History (PoH)", d: "Menciptakan timestamp historis sebelum konsensus, memungkinkan paralelisasi." },
                    { l: "Konsensus", v: "Tower BFT", d: "Versi modifikasi dari PBFT yang memanfaatkan jam PoH." },
                    { l: "Throughput", v: "65,000+ TPS", d: "Salah satu blockchain tercepat tanpa sharding." },
                    { l: "Eksekusi", v: "Sealevel", d: "Runtime paralel yang memproses ribuan Smart Contracts bersamaan." },
                    { l: "Biaya", v: "Ultra Rendah (<$0.001)", d: "Sangat cocok untuk DeFi frekuensi tinggi dan GameFi." }
                ]
            },
            'binancecoin': {
                history: [
                    { y: "2017", t: "Diluncurkan via ICO sebagai token ERC-20 untuk diskon biaya trading di Binance Exchange." },
                    { y: "2019", t: "Migrasi ke Binance Chain (BEP-2). Mainnet mandiri diluncurkan." },
                    { y: "2020", t: "Binance Smart Chain (BSC) diluncurkan dengan fitur Smart Contract kompatibel EVM." },
                    { y: "2021", t: "Menjadi alternatif Ethereum utama saat biaya gas ETH meroket, didorong oleh PancakeSwap." },
                    { y: "2022", t: "Rebranding menjadi BNB Chain (Build N Build). Fokus pada performa dan interoperabilitas." }
                ],
                tech: [
                    { l: "Konsensus", v: "Proof of Staked Authority", d: "Gabungan DPoS dan PoA. Hanya 21 validator aktif untuk kecepatan tinggi." },
                    { l: "Utilitas", v: "Gas & Diskon", d: "Bahan bakar jaringan BSC dan diskon trading di ekosistem Binance." },
                    { l: "Deflasi", v: "Auto-Burn", d: "Mekanisme pembakaran otomatis triwulanan berdasarkan harga dan jumlah blok." },
                    { l: "Kompatibilitas", v: "EVM Compatible", d: "Mudah bagi developer Ethereum untuk memindahkan DApps ke BNB Chain." }
                ]
            },
            'ripple': {
                history: [
                    { y: "2012", t: "OpenCoin (sekarang Ripple Labs) didirikan. Ledger XRP diluncurkan." },
                    { y: "2017", t: "Kemitraan dengan bank global (Santander, Amex) untuk pembayaran lintas batas." },
                    { y: "2020", t: "SEC menuntut Ripple Labs, mengklaim XRP adalah sekuritas yang tidak terdaftar." },
                    { y: "2023", t: "KEMENANGAN HUKUM: Hakim memutuskan penjualan XRP di bursa publik BUKAN sekuritas." },
                    { y: "2024", t: "Fokus ekspansi ke layanan kustodi dan stablecoin institusi." }
                ],
                tech: [
                    { l: "Algoritma", v: "RPCA", d: "Ripple Protocol Consensus Algorithm. Tidak ada mining, validasi via node terpercaya (UNL)." },
                    { l: "Kecepatan", v: "3-5 Detik", d: "Settlement instan untuk pembayaran lintas negara." },
                    { l: "Likuiditas", v: "On-Demand Liquidity", d: "Menggunakan XRP sebagai jembatan mata uang fiat secara real-time." },
                    { l: "Biaya", v: "0.00001 XRP", d: "Mencegah spam jaringan dengan biaya yang sangat kecil namun ada." }
                ]
            },
            'cardano': {
                history: [
                    { y: "2017", t: "Diluncurkan oleh Charles Hoskinson (co-founder Ethereum). Pendekatan akademis peer-reviewed." },
                    { y: "2020", t: "Era Shelley: Desentralisasi penuh jaringan staking pool diluncurkan." },
                    { y: "2021", t: "Era Alonzo: Hard fork yang akhirnya membawa kemampuan Smart Contracts." },
                    { y: "2022", t: "Era Vasil: Peningkatan skalabilitas dan throughput skrip Plutus." },
                    { y: "2024", t: "Era Voltaire (Governance): Menuju tata kelola sepenuhnya oleh komunitas." }
                ],
                tech: [
                    { l: "Konsensus", v: "Ouroboros PoS", d: "Protokol Proof-of-Stake pertama yang terbukti aman secara matematis." },
                    { l: "Arsitektur", v: "Dual Layer", d: "Settlement Layer (CSL) untuk nilai, Computation Layer (CCL) untuk kontrak." },
                    { l: "Bahasa", v: "Haskell / Plutus", d: "Bahasa fungsional yang minim bug untuk kontrak keuangan berisiko tinggi." },
                    { l: "Model Akun", v: "eUTXO", d: "Gabungan keamanan Bitcoin dengan kemampuan program Ethereum." }
                ]
            },
            'dogecoin': {
                history: [
                    { y: "2013", t: "Dibuat sebagai lelucon ('Meme Coin') oleh Billy Markus & Jackson Palmer." },
                    { y: "2014", t: "Komunitas mendanai Tim Bobsled Jamaika ke Olimpiade menggunakan DOGE." },
                    { y: "2021", t: "Elon Musk mulai men-tweet tentang DOGE. Harga naik 10,000%+. Tampil di SNL." }
                ],
                tech: [
                    { l: "Basis Kode", v: "Luckycoin / Litecoin", d: "Turunan dari Litecoin, menggunakan algoritma Scrypt." },
                    { l: "Mining", v: "AuxPoW", d: "Dapat ditambang bersamaan dengan Litecoin tanpa daya tambahan." },
                    { l: "Supply", v: "Uncapped (Inflasi)", d: "10,000 DOGE dicetak per blok selamanya. Didesain untuk dibelanjakan, bukan ditimbun." }
                ]
            },
            'polkadot': {
                history: [
                    { y: "2016", t: "Whitepaper dirilis oleh Gavin Wood (CTO Ethereum). Visi multi-chain." },
                    { y: "2020", t: "Mainnet diluncurkan dengan fase 'Proof of Authority'." },
                    { y: "2021", t: "Lelang Parachain dimulai. Acala memenangkan slot pertama." }
                ],
                tech: [
                    { l: "Struktur", v: "Layer-0", d: "Relay Chain menghubungkan berbagai blockchain independen (Parachains)." },
                    { l: "Konsensus", v: "NPoS", d: "Nominated Proof-of-Stake. Token holder menominasikan validator tepercaya." },
                    { l: "Upgrade", v: "Forkless", d: "Dapat melakukan upgrade sistem tanpa hard fork yang memecah komunitas." },
                    { l: "Framework", v: "Substrate", d: "SDK modular untuk membangun blockchain kustom dalam hitungan menit." }
                ]
            },
            'tron': {
                history: [
                    { y: "2017", t: "ICO besar-besaran oleh Justin Sun. Visi desentralisasi web." },
                    { y: "2018", t: "Mainnet 'Independence Day' lepas dari ERC-20. Mengakuisisi BitTorrent." },
                    { y: "2019", t: "Dominasi di sektor USDT (Tether) karena biaya transfer murah." }
                ],
                tech: [
                    { l: "Konsensus", v: "DPoS", d: "Delegated Proof of Stake dengan 27 Super Representative." },
                    { l: "Throughput", v: "2000 TPS", d: "Optimal untuk aplikasi hiburan dan transfer stablecoin." },
                    { l: "VM", v: "TVM", d: "Kompatibel penuh dengan Ethereum Virtual Machine." }
                ]
            },
            'avalanche-2': {
                history: [
                    { y: "2020", t: "Mainnet diluncurkan. Menawarkan finalitas transaksi sub-detik." },
                    { y: "2021", t: "Program insentif 'Avalanche Rush' menarik miliaran dolar ke DeFi (Aave, Curve)." },
                    { y: "2023", t: "Kemitraan institusi (AWS, Deloitte) menggunakan Subnets." }
                ],
                tech: [
                    { l: "Konsensus", v: "Snowman (DAG)", d: "Protokol konsensus revolusioner berbasis sampling gossiping." },
                    { l: "Arsitektur", v: "Triple Chain", d: "X-Chain (Exchange), P-Chain (Platform), C-Chain (Contract - EVM)." },
                    { l: "Skaling", v: "Subnets", d: "Memungkinkan pembuatan blockchain kustom (AppChains) yang terisolasi." }
                ]
            },
            // TAMBAHAN ASSET BARU
            'tether-gold': {
                name: "Tether Gold",
                symbol: "XAUT",
                history: [
                    { y: "2020", t: "Diluncurkan oleh Tether sebagai stablecoin yang di-backing emas fisik 1:1." },
                    { y: "2021", t: "Ekspansi ke berbagai bursa global sebagai alternatif investasi emas digital." },
                    { y: "2023", t: "Mencapai kapitalisasi pasar $500M, menjadi token emas terbesar di crypto." }
                ],
                tech: [
                    { l: "Backing", v: "Emas Fisik 1:1", d: "Setiap token di-backing oleh 1 troy ounce emas 99.5% murni." },
                    { l: "Penyimpanan", v: "Vault di Swiss", d: "Emas fisik disimpan di fasilitas penyimpanan kelas atas di Swiss." },
                    { l: "Audit", v: "Transparan Berkala", d: "Audit rutin oleh firma pihak ketiga untuk memverifikasi cadangan." },
                    { l: "Fungsi", v: "Hedging Inflasi", d: "Sebagai lindung nilai terhadap volatilitas crypto dan inflasi fiat." }
                ]
            },
            'pax-gold': {
                name: "Paxos Gold",
                symbol: "PAXG",
                history: [
                    { y: "2019", t: "Diluncurkan oleh Paxos Trust Company, diatur oleh NYDFS." },
                    { y: "2020", t: "Menjadi token emas pilihan institusi karena regulasi yang ketat." },
                    { y: "2022", t: "Integrasi dengan DeFi protocol utama seperti Aave dan Compound." }
                ],
                tech: [
                    { l: "Regulasi", v: "Diatur NYDFS", d: "Tunduk pada pengawasan ketat Departemen Layanan Keuangan NY." },
                    { l: "Backing", v: "London Good Delivery", d: "Emas fisik memenuhi standar London Good Delivery." },
                    { l: "Penebusan", v: "Fisik atau Digital", d: "Pemegang dapat menebus emas fisik atau menjual secara digital." },
                    { l: "Blockchain", v: "Ethereum ERC-20", d: "Berjalan di jaringan Ethereum, kompatibel dengan semua wallet." }
                ]
            }
        };

        // DATABASE ETF
        const ETF_DB = {
            'spy': {
                name: "SPDR S&P 500 ETF",
                symbol: "SPY",
                type: "World ETF",
                price: 520.34,
                change: 0.5,
                description: "ETF terbesar di dunia yang melacak indeks S&P 500, mewakili 500 perusahaan terbesar AS.",
                flow: "+$1.2B weekly"
            },
            'qqq': {
                name: "Invesco QQQ ETF",
                symbol: "QQQ",
                type: "Tech ETF", 
                price: 445.67,
                change: 0.7,
                description: "ETF yang melacak indeks Nasdaq-100, berfokus pada perusahaan teknologi besar.",
                flow: "+$850M weekly"
            },
            'vti': {
                name: "Vanguard Total Stock Market",
                symbol: "VTI",
                type: "Total Market ETF",
                price: 265.89,
                change: 0.4,
                description: "ETF yang memberikan eksposur ke seluruh pasar saham AS.",
                flow: "+$750M weekly"
            },
            'ibit': {
                name: "iShares Bitcoin Trust",
                symbol: "IBIT",
                type: "Bitcoin ETF",
                price: 40.12,
                change: 2.5,
                description: "Spot Bitcoin ETF pertama yang disetujui SEC, dikelola oleh BlackRock.",
                flow: "+$500M daily",
                aum: "$18.2B"
            },
            'gbtc': {
                name: "Grayscale Bitcoin Trust",
                symbol: "GBTC",
                type: "Bitcoin ETF",
                price: 58.45,
                change: 2.8,
                description: "Bitcoin ETF pertama yang dikonversi dari trust, dikelola oleh Grayscale.",
                flow: "+$300M daily",
                aum: "$25.1B"
            },
            'ethe': {
                name: "Grayscale Ethereum Trust",
                symbol: "ETHE", 
                type: "Ethereum ETF",
                price: 35.60,
                change: 3.2,
                description: "Trust Ethereum terbesar yang menunggu konversi ke spot ETF.",
                flow: "+$150M weekly",
                aum: "$8.5B"
            },
            'btc-flow': {
                name: "Bitcoin ETF Net Flow",
                symbol: "BTC-FLOW",
                type: "Flow Data",
                price: 0,
                change: 0,
                description: "Data agregat aliran masuk/keluar semua Bitcoin ETF di AS.",
                flow: "+$1.8B monthly",
                dailyAvg: "+$85M"
            },
            'eth-flow': {
                name: "Ethereum ETF Flow",
                symbol: "ETH-FLOW",
                type: "Flow Data",
                price: 0,
                change: 0,
                description: "Data aliran masuk/keluar produk Ethereum institusional.",
                flow: "+$450M monthly",
                dailyAvg: "+$21M"
            }
        };

        const CRYPTO_LIST = ['bitcoin', 'ethereum', 'solana', 'binancecoin', 'ripple', 'cardano', 'dogecoin', 'polkadot', 'tron', 'avalanche-2', 'tether-gold', 'pax-gold'];
        const ETF_LIST = ['spy', 'qqq', 'vti', 'ibit', 'gbtc', 'ethe', 'btc-flow', 'eth-flow'];
        
        let currentCoin = 'bitcoin';
        let currentType = 'crypto'; // 'crypto' atau 'etf'
        let chartInstance = null;
        const API = 'https://api.coingecko.com/api/v3';

        // === FETCHERS ===
        async function loadMarket() {
            try {
                // Ambil data crypto dari CoinGecko
                const res = await fetch(`${API}/coins/markets?vs_currency=usd&ids=${CRYPTO_LIST.join(',')}&order=market_cap_desc&sparkline=false&price_change_percentage=24h`);
                const cryptoData = await res.json();
                
                // Gabungkan dengan data ETF
                const allAssets = [
                    ...cryptoData,
                    ...ETF_LIST.map(etfId => ({
                        id: etfId,
                        name: ETF_DB[etfId].name,
                        symbol: ETF_DB[etfId].symbol,
                        current_price: ETF_DB[etfId].price,
                        price_change_percentage_24h: ETF_DB[etfId].change,
                        image: `https://cdn.jsdelivr.net/gh/atomiclabs/cryptocurrency-icons@bea1a9722a8c63169dcc06e86182bf2c55a76bbc/svg/color/${etfId.includes('btc') || etfId.includes('eth') ? 'btc' : 'generic'}.svg`,
                        market_cap: 0,
                        total_volume: 0,
                        high_24h: ETF_DB[etfId].price * 1.02,
                        ath: ETF_DB[etfId].price * 1.1,
                        market_cap_rank: 100 + ETF_LIST.indexOf(etfId)
                    }))
                ];

                renderList(allAssets);
                renderTicker(allAssets);
                
                // Refresh dashboard berdasarkan tipe aset
                if (currentType === 'crypto') {
                    const coin = allAssets.find(c => c.id === currentCoin);
                    if (coin) refreshDashboard(coin);
                } else {
                    const etf = allAssets.find(e => e.id === currentCoin);
                    if (etf) refreshETFDashboard(etf);
                }

                // Global Mock
                document.getElementById('g-mcap').innerHTML = "$2.42T <span class='up'>(+1.2%)</span>";
                document.getElementById('g-vol').innerText = "$84.5B";
                document.getElementById('g-dom').innerText = "53.2%";
            } catch (e) { console.error(e); }
        }

        async function refreshDashboard(coin) {
            if (!coin) return;
            currentType = 'crypto';
            
            // Header
            document.getElementById('d-name').innerHTML = `<img src="${coin.image}" id="d-img" style="width:40px;margin-right:10px"> ${coin.name} <span>${coin.symbol.toUpperCase()}</span>`;
            document.getElementById('d-price').innerText = '$' + coin.current_price.toLocaleString();
            const isUp = coin.price_change_percentage_24h >= 0;
            const changeEl = document.getElementById('d-change');
            changeEl.innerText = (isUp ? '+' : '') + coin.price_change_percentage_24h.toFixed(2) + '%';
            changeEl.className = 'change ' + (isUp ? 'up' : 'down');

            // Stats
            document.getElementById('d-mcap').innerText = simplifyNum(coin.market_cap);
            document.getElementById('d-vol').innerText = simplifyNum(coin.total_volume);
            document.getElementById('d-high').innerText = '$' + coin.high_24h.toLocaleString();
            document.getElementById('d-ath').innerText = '$' + coin.ath.toLocaleString();

            // Desc
            try {
                const dRes = await fetch(`${API}/coins/${coin.id}?localization=false&tickers=false&market_data=false`);
                const dData = await dRes.json();
                let desc = dData.description.en ? dData.description.en.split('. ')[0] + '.' : "Deskripsi tidak tersedia.";
                document.getElementById('desc-text').innerText = desc;
            } catch (e) { document.getElementById('desc-text').innerText = ""; }

            // Content Injection (History & Tech)
            const db = COIN_DB[coin.id] || { 
                history: [{ y: "N/A", t: "Data sejarah belum tersedia untuk aset ini." }], 
                tech: [{ l: "Info", v: "N/A", d: "Detail teknis sedang dikurasi." }] 
            };

            // Render History
            const hCont = document.getElementById('history-container');
            hCont.innerHTML = db.history.map(h => `<div class="hist-event"><div class="hist-year">${h.y}</div><div class="hist-text">${h.t}</div></div>`).join('');

            // Render Tech
            const tCont = document.getElementById('tech-container');
            tCont.innerHTML = db.tech.map(t => `<div class="tech-card"><div class="tech-label">${t.l}</div><div class="tech-val">${t.v}</div><div class="tech-desc">${t.d}</div></div>`).join('');

            // Load Chart dan indikator teknikal
            loadChart(coin.id, 7);
        }

        function refreshETFDashboard(etf) {
            if (!etf) return;
            currentType = 'etf';
            
            const etfData = ETF_DB[etf.id] || {};
            
            // Header
            document.getElementById('d-name').innerHTML = `<img src="${etf.image}" style="width:40px;margin-right:10px"> ${etfData.name} <span>${etfData.symbol}</span>`;
            document.getElementById('d-price').innerText = etfData.price > 0 ? '$' + etfData.price.toLocaleString() : 'Flow Data';
            
            const isUp = etfData.change >= 0;
            const changeEl = document.getElementById('d-change');
            changeEl.innerText = (isUp ? '+' : '') + etfData.change.toFixed(2) + '%';
            changeEl.className = 'change ' + (isUp ? 'up' : 'down');

            // Stats khusus ETF
            document.getElementById('d-mcap').innerText = etfData.aum || '--';
            document.getElementById('d-vol').innerText = etfData.flow || '--';
            document.getElementById('d-high').innerText = etfData.type;
            document.getElementById('d-ath').innerText = etfData.dailyAvg || '--';

            // Desc
            document.getElementById('desc-text').innerText = etfData.description || "Data ETF institusional.";

            // Kosongkan history dan tech untuk ETF
            document.getElementById('history-container').innerHTML = '<div class="hist-event"><div class="hist-year">ETF</div><div class="hist-text">Data historis khusus untuk produk ETF.</div></div>';
            document.getElementById('tech-container').innerHTML = '<div class="tech-card"><div class="tech-label">Tipe Produk</div><div class="tech-val">' + etfData.type + '</div><div class="tech-desc">Exchange Traded Fund</div></div>';

            // Untuk ETF, gunakan data simulasi
            simulateETFChart(etf.id);
            calculateTechnicalIndicators('etf', etfData);
        }

        // === CHART ===
        async function loadChart(id, days) {
            try {
                const res = await fetch(`${API}/coins/${id}/market_chart?vs_currency=usd&days=${days}`);
                const data = await res.json();
                renderChart(data.prices);
                calculateTechnicalIndicators('crypto', data.prices);
            } catch (e) { 
                console.error("Chart error:", e);
                // Fallback ke chart kosong
                renderEmptyChart();
            }
        }

        function simulateETFChart(etfId) {
            const ctx = document.getElementById('mainChart').getContext('2d');
            const days = 30;
            let basePrice = ETF_DB[etfId]?.price || 100;
            
            // Generate data simulasi
            let prices = [];
            let current = basePrice;
            for (let i = 0; i < days; i++) {
                // Random walk dengan sedikit trend positif untuk ETF
                const change = (Math.random() - 0.45) * 0.02; // Bias positif kecil
                current *= (1 + change);
                prices.push([Date.now() - (days - i) * 86400000, current]);
            }

            renderChart(prices);
        }

        function renderChart(prices) {
            const ctx = document.getElementById('mainChart').getContext('2d');
            const d = prices.map(p => p[1]);
            const l = prices.map((p, i) => {
                const date = new Date(p[0]);
                return `${date.getMonth()+1}/${date.getDate()}`;
            });

            if (chartInstance) chartInstance.destroy();

            const grad = ctx.createLinearGradient(0, 0, 0, 400);
            grad.addColorStop(0, 'rgba(59, 130, 246, 0.5)');
            grad.addColorStop(1, 'rgba(59, 130, 246, 0.0)');

            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: l,
                    datasets: [{
                        data: d,
                        borderColor: '#3b82f6',
                        backgroundColor: grad,
                        borderWidth: 2,
                        fill: true,
                        pointRadius: 0,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    interaction: { intersect: false, mode: 'index' },
                    scales: {
                        x: { 
                            display: true,
                            grid: { color: '#222' },
                            ticks: { color: '#666', maxTicksLimit: 8 }
                        },
                        y: { 
                            grid: { color: '#222' }, 
                            ticks: { color: '#666' } 
                        }
                    }
                }
            });
        }

        function renderEmptyChart() {
            const ctx = document.getElementById('mainChart').getContext('2d');
            if (chartInstance) chartInstance.destroy();
            
            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: []
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: false },
                        title: {
                            display: true,
                            text: 'Data chart tidak tersedia',
                            color: '#666'
                        }
                    }
                }
            });
        }

        // === TEKNICAL INDICATORS CALCULATION ===
        function calculateTechnicalIndicators(type, data) {
            let rsi, momentum, volumeLevel;
            
            if (type === 'crypto' && data && data.length > 14) {
                const prices = data.map(p => p[1]);
                
                // Hitung RSI (14 period)
                rsi = calculateRSI(prices);
                
                // Hitung Momentum (perubahan 14 period)
                momentum = ((prices[prices.length-1] - prices[prices.length-14]) / prices[prices.length-14]) * 100;
                
                // Volume level (simulasi)
                volumeLevel = 65 + Math.random() * 30;
                
                // Hitung EMA (simulasi)
                const ema13 = prices[prices.length-1] * (0.98 + Math.random() * 0.04);
                const ema21 = prices[prices.length-1] * (0.97 + Math.random() * 0.06);
                const ema50 = prices[prices.length-1] * (0.95 + Math.random() * 0.10);
                
                // Render indikator
                renderTechnicalIndicators(rsi, momentum, volumeLevel);
                renderEMAs(ema13, ema21, ema50, prices[prices.length-1]);
                
            } else if (type === 'etf') {
                // Data simulasi untuk ETF
                rsi = 50 + (Math.random() * 40 - 20);
                momentum = ETF_DB[currentCoin]?.change || 0;
                volumeLevel = 40 + Math.random() * 50;
                
                const currentPrice = ETF_DB[currentCoin]?.price || 100;
                const ema13 = currentPrice * (0.99 + Math.random() * 0.02);
                const ema21 = currentPrice * (0.985 + Math.random() * 0.03);
                const ema50 = currentPrice * (0.98 + Math.random() * 0.04);
                
                renderTechnicalIndicators(rsi, momentum, volumeLevel);
                renderEMAs(ema13, ema21, ema50, currentPrice);
            }
            
            // Update signal
            updateSignal(rsi, momentum);
        }

        function calculateRSI(prices, period = 14) {
            if (prices.length < period + 1) return 50;
            
            let gains = 0;
            let losses = 0;
            
            for (let i = 1; i <= period; i++) {
                const diff = prices[prices.length - i] - prices[prices.length - i - 1];
                if (diff > 0) gains += diff;
                else losses -= diff;
            }
            
            const avgGain = gains / period;
            const avgLoss = losses / period;
            
            if (avgLoss === 0) return 100;
            
            const rs = avgGain / avgLoss;
            return 100 - (100 / (1 + rs));
        }

        function renderTechnicalIndicators(rsi, momentum, volume) {
            const container = document.getElementById('technical-container');
            
            // Tentukan status RSI
            let rsiStatus = 'status-neutral';
            let rsiText = 'NEUTRAL';
            if (rsi >= 70) {
                rsiStatus = 'status-overbought';
                rsiText = 'OVERBOUGHT';
            } else if (rsi <= 30) {
                rsiStatus = 'status-oversold';
                rsiText = 'OVERSOLD';
            }
            
            // Tentukan status Momentum
            let momStatus = momentum >= 0 ? 'up' : 'down';
            let momColor = momentum >= 0 ? 'var(--green)' : 'var(--red)';
            
            container.innerHTML = `
                <div class="indicator-card">
                    <div class="indicator-header">
                        <small>RSI (14)</small>
                        <span class="indicator-status ${rsiStatus}">${rsiText}</span>
                    </div>
                    <div class="indicator-value" style="color:${rsi >= 70 ? 'var(--red)' : rsi <= 30 ? 'var(--green)' : 'var(--primary)'}">
                        ${rsi ? rsi.toFixed(2) : '--'}
                    </div>
                    <small style="color:#666; margin-top:5px; display:block">
                        ${rsi >= 70 ? 'Potensi koreksi' : rsi <= 30 ? 'Potensi rebound' : 'Dalam range normal'}
                    </small>
                </div>
                
                <div class="indicator-card">
                    <div class="indicator-header">
                        <small>Momentum</small>
                        <span class="indicator-status ${momStatus === 'up' ? 'status-oversold' : 'status-overbought'}">
                            ${momStatus === 'up' ? 'BULLISH' : 'BEARISH'}
                        </span>
                    </div>
                    <div class="indicator-value" style="color:${momColor}">
                        ${momentum ? (momentum >= 0 ? '+' : '') + momentum.toFixed(2) + '%' : '--'}
                    </div>
                    <small style="color:#666; margin-top:5px; display:block">
                        ${Math.abs(momentum) > 5 ? 'Strong move' : 'Normal volatility'}
                    </small>
                </div>
            `;
            
            // Update volume
            document.getElementById('volume-value').textContent = volume ? volume.toFixed(0) + '%' : '--';
            document.getElementById('volume-bar').style.width = volume + '%';
        }

        function renderEMAs(ema13, ema21, ema50, currentPrice) {
            const container = document.getElementById('ema-container');
            
            const getEMASignal = (ema, price) => {
                if (price > ema * 1.02) return { signal: 'BULLISH', color: 'var(--green)' };
                if (price < ema * 0.98) return { signal: 'BEARISH', color: 'var(--red)' };
                return { signal: 'NEUTRAL', color: 'var(--primary)' };
            };
            
            const ema13Signal = getEMASignal(ema13, currentPrice);
            const ema21Signal = getEMASignal(ema21, currentPrice);
            const ema50Signal = getEMASignal(ema50, currentPrice);
            
            container.innerHTML = `
                <div class="tech-card">
                    <div class="tech-label">EMA 13 Week</div>
                    <div class="tech-val" style="color:${ema13Signal.color}">$${ema13 ? ema13.toFixed(2) : '--'}</div>
                    <div class="tech-desc">${ema13Signal.signal} vs Current</div>
                </div>
                <div class="tech-card">
                    <div class="tech-label">EMA 21 Week</div>
                    <div class="tech-val" style="color:${ema21Signal.color}">$${ema21 ? ema21.toFixed(2) : '--'}</div>
                    <div class="tech-desc">${ema21Signal.signal} vs Current</div>
                </div>
                <div class="tech-card">
                    <div class="tech-label">EMA 50 Week</div>
                    <div class="tech-val" style="color:${ema50Signal.color}">$${ema50 ? ema50.toFixed(2) : '--'}</div>
                    <div class="tech-desc">${ema50Signal.signal} vs Current</div>
                </div>
            `;
        }

        function updateSignal(rsi, momentum) {
            let sig = "NEUTRAL";
            let col = "#aaa";
            let reason = "";

            if (rsi >= 70 && momentum > 5) {
                sig = "STRONG SELL";
                col = "var(--red)";
                reason = "RSI Overbought + Momentum Bullish Extreme";
            } else if (rsi >= 70) {
                sig = "CAUTION";
                col = "#f59e0b";
                reason = "RSI Overbought Territory";
            } else if (rsi <= 30 && momentum < -5) {
                sig = "STRONG BUY";
                col = "var(--green)";
                reason = "RSI Oversold + Momentum Bearish Extreme";
            } else if (rsi <= 30) {
                sig = "ACCUMULATE";
                col = "var(--green)";
                reason = "RSI Oversold Territory";
            } else if (momentum > 10) {
                sig = "BULLISH";
                col = "var(--green)";
                reason = "Strong Positive Momentum";
            } else if (momentum < -10) {
                sig = "BEARISH";
                col = "var(--red)";
                reason = "Strong Negative Momentum";
            } else {
                sig = "NEUTRAL";
                col = "#aaa";
                reason = "Market in Normal Range";
            }

            const el = document.getElementById('tech-signal');
            el.innerText = sig;
            el.style.color = col;
            document.getElementById('tech-reason').innerHTML = `${reason} <span style='color:#666'>|</span> RSI: ${rsi ? rsi.toFixed(1) : '--'}`;
            
            // Update bars
            const bS = document.getElementById('bar-sell');
            const bN = document.getElementById('bar-neutral');
            const bB = document.getElementById('bar-buy');
            
            bS.style.opacity = 0.2;
            bN.style.opacity = 0.2;
            bB.style.opacity = 0.2;
            
            if (sig.includes("SELL") || sig.includes("BEARISH")) bS.style.opacity = 1;
            else if (sig.includes("BUY") || sig.includes("BULLISH") || sig.includes("ACCUMULATE")) bB.style.opacity = 1;
            else bN.style.opacity = 1;
        }

        // === HELPERS ===
        function renderList(data) {
            const el = document.getElementById('asset-list');
            el.innerHTML = '';
            data.forEach(c => {
                const div = document.createElement('div');
                div.className = `asset-item ${c.id === currentCoin ? 'active' : ''}`;
                div.onclick = () => { 
                    currentCoin = c.id; 
                    if (ETF_LIST.includes(c.id)) {
                        refreshETFDashboard(c);
                    } else {
                        loadMarket();
                    }
                };
                
                const typeBadge = ETF_LIST.includes(c.id) ? `<span class="asset-meta">ETF</span>` : `<span class="asset-meta">#${c.market_cap_rank || '--'}</span>`;
                
                div.innerHTML = `<img src="${c.image}" style="width:28px">
                    <div class="asset-info">
                        <span class="asset-name">${c.symbol.toUpperCase()}</span>
                        <div class="asset-meta">${typeBadge}</div>
                    </div>
                    <div class="asset-price">
                        <div>${c.current_price > 0 ? '$' + c.current_price.toLocaleString() : 'Flow'}</div>
                        <div style="font-size:.7rem;color:${c.price_change_percentage_24h >= 0 ? 'var(--green)' : 'var(--red)'}">
                            ${c.price_change_percentage_24h ? c.price_change_percentage_24h.toFixed(2) + '%' : '--'}
                        </div>
                    </div>`;
                el.appendChild(div);
            });
        }
        
        function renderTicker(data) {
            const el = document.getElementById('ticker-bar');
            el.innerHTML = '';
            [...data, ...data].forEach(c => {
                const d = document.createElement('div');
                d.className = 'ticker-item';
                d.innerHTML = `<img src="${c.image}"> <strong>${c.symbol.toUpperCase()}</strong> ${c.current_price > 0 ? '$' + c.current_price.toLocaleString() : ''} <span style="color:${c.price_change_percentage_24h >= 0 ? 'var(--green)' : 'var(--red)'}">${c.price_change_percentage_24h ? c.price_change_percentage_24h.toFixed(1) + '%' : ''}</span>`;
                d.onclick = () => { 
                    currentCoin = c.id; 
                    if (ETF_LIST.includes
