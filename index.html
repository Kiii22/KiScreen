<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoVerse Pro: Crypto, ETF & Gold Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --card-hover: #334155;
            --primary: #3b82f6;
            --accent: #8b5cf6;
            --green: #10b981;
            --red: #ef4444;
            --yellow: #f59e0b;
            --text: #f1f5f9;
            --dim: #94a3b8;
            --border: #334155;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: var(--bg);
            color: var(--text);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header */
        header {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 15px 0;
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .global-stats {
            display: flex;
            gap: 30px;
            font-size: 0.9rem;
        }
        
        .g-stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .g-stat-value {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--primary);
        }
        
        .g-stat-label {
            color: var(--dim);
            font-size: 0.8rem;
        }
        
        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 5px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
        }
        
        .nav-tab {
            padding: 10px 20px;
            background: none;
            border: none;
            color: var(--dim);
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .nav-tab:hover {
            background: rgba(255,255,255,0.05);
        }
        
        .nav-tab.active {
            background: var(--card);
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }
        
        /* Main Content */
        .tab-content {
            display: none;
            padding: 30px 0;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Crypto Table */
        .crypto-table {
            background: var(--card);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .table-header, .table-row {
            display: grid;
            grid-template-columns: 50px 150px 1fr 120px 120px 120px 120px 120px 100px;
            padding: 15px 20px;
            border-bottom: 1px solid var(--border);
            align-items: center;
        }
        
        .table-header {
            background: rgba(0,0,0,0.2);
            font-weight: 600;
            color: var(--dim);
            font-size: 0.9rem;
        }
        
        .table-row {
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .table-row:hover {
            background: var(--card-hover);
        }
        
        .table-row.active {
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid var(--primary);
        }
        
        .coin-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .coin-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
        }
        
        .coin-name {
            font-weight: 600;
        }
        
        .coin-symbol {
            color: var(--dim);
            font-size: 0.9rem;
        }
        
        .price-change {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .price-change.positive {
            background: rgba(16, 185, 129, 0.1);
            color: var(--green);
        }
        
        .price-change.negative {
            background: rgba(239, 68, 68, 0.1);
            color: var(--red);
        }
        
        /* Chart Area */
        .chart-container {
            background: var(--card);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .selected-coin {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .coin-price {
            font-size: 2.2rem;
            font-weight: 700;
        }
        
        .chart-timeframes {
            display: flex;
            gap: 10px;
        }
        
        .timeframe-btn {
            padding: 8px 16px;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border);
            color: var(--dim);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .timeframe-btn:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .timeframe-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        /* Technical Indicators */
        .indicators-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .indicator-card {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
        }
        
        .indicator-title {
            font-size: 0.9rem;
            color: var(--dim);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .indicator-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .indicator-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .status-buy {
            background: rgba(16, 185, 129, 0.2);
            color: var(--green);
        }
        
        .status-sell {
            background: rgba(239, 68, 68, 0.2);
            color: var(--red);
        }
        
        .status-neutral {
            background: rgba(245, 158, 11, 0.2);
            color: var(--yellow);
        }
        
        /* Gold Section */
        .gold-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .gold-card {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(180, 83, 9, 0.1));
            border: 1px solid rgba(245, 158, 11, 0.2);
            border-radius: 12px;
            padding: 25px;
        }
        
        .gold-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .gold-icon {
            font-size: 2rem;
            color: #f59e0b;
        }
        
        .gold-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: #f59e0b;
        }
        
        /* ETF Section */
        .etf-table {
            background: var(--card);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 30px;
        }
        
        .etf-row {
            display: grid;
            grid-template-columns: 100px 150px 1fr 120px 120px 120px 120px;
            padding: 15px 20px;
            border-bottom: 1px solid var(--border);
            align-items: center;
        }
        
        .etf-header {
            background: rgba(0,0,0,0.2);
            font-weight: 600;
            color: var(--dim);
            font-size: 0.9rem;
        }
        
        .inflow {
            color: var(--green);
            font-weight: 600;
        }
        
        .outflow {
            color: var(--red);
            font-weight: 600;
        }
        
        /* History Timeline */
        .history-container {
            background: var(--card);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .history-timeline {
            position: relative;
            margin-top: 20px;
            padding-left: 20px;
        }
        
        .history-timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 2px;
            background: var(--primary);
        }
        
        .history-event {
            margin-bottom: 25px;
            position: relative;
        }
        
        .history-event::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 5px;
            width: 12px;
            height: 12px;
            background: var(--primary);
            border-radius: 50%;
            border: 3px solid var(--card);
        }
        
        .event-year {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .event-desc {
            color: var(--dim);
        }
        
        /* Loading States */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--dim);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .skeleton {
            background: linear-gradient(90deg, var(--card) 25%, var(--card-hover) 50%, var(--card) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .table-header, .table-row {
                grid-template-columns: 50px 120px 1fr 100px 100px 100px 100px 100px 80px;
                font-size: 0.9rem;
            }
            
            .etf-row {
                grid-template-columns: 80px 120px 1fr 100px 100px 100px 100px;
            }
        }
        
        @media (max-width: 992px) {
            .table-header, .table-row {
                grid-template-columns: 40px 100px 1fr 80px 80px 80px 80px 80px 70px;
                padding: 12px 15px;
                font-size: 0.85rem;
            }
            
            .global-stats {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .nav-tabs {
                overflow-x: auto;
                padding-bottom: 5px;
            }
            
            .chart-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .chart-timeframes {
                width: 100%;
                justify-content: space-between;
            }
            
            .timeframe-btn {
                flex: 1;
                text-align: center;
            }
        }
        
        @media (max-width: 576px) {
            .container {
                padding: 0 10px;
            }
            
            .table-header {
                display: none;
            }
            
            .table-row {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .coin-info {
                justify-content: center;
                text-align: center;
                flex-direction: column;
            }
            
            .indicators-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Utility Classes */
        .positive { color: var(--green); }
        .negative { color: var(--red); }
        .up { color: var(--green); }
        .down { color: var(--red); }
        .hidden { display: none; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .gap-2 { gap: 8px; }
        .gap-4 { gap: 16px; }
        .mb-4 { margin-bottom: 16px; }
        .mb-6 { margin-bottom: 24px; }
        .mt-4 { margin-top: 16px; }
        .text-center { text-align: center; }
        .text-sm { font-size: 0.9rem; }
        .text-xs { font-size: 0.8rem; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-top">
                <div class="logo">
                    <i class="fas fa-chart-line"></i> CryptoVerse Pro
                </div>
                <div class="global-stats">
                    <div class="g-stat">
                        <div class="g-stat-value" id="global-mcap">$2.42T</div>
                        <div class="g-stat-label">Market Cap</div>
                    </div>
                    <div class="g-stat">
                        <div class="g-stat-value" id="global-volume">$84.5B</div>
                        <div class="g-stat-label">Volume 24h</div>
                    </div>
                    <div class="g-stat">
                        <div class="g-stat-value" id="btc-dominance">53.2%</div>
                        <div class="g-stat-label">BTC Dominance</div>
                    </div>
                    <div class="g-stat">
                        <div class="g-stat-value" id="fear-greed">72</div>
                        <div class="g-stat-label">Fear & Greed</div>
                    </div>
                </div>
                <div class="text-sm">
                    <span id="last-updated">Terakhir update: <span id="update-time">--:--</span></span>
                </div>
            </div>
            
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="switchTab('crypto')">
                    <i class="fas fa-coins"></i> Top 20 Crypto
                </button>
                <button class="nav-tab" onclick="switchTab('etf')">
                    <i class="fas fa-chart-bar"></i> ETF Crypto
                </button>
                <button class="nav-tab" onclick="switchTab('gold')">
                    <i class="fas fa-gem"></i> Emas & Logam Mulia
                </button>
                <button class="nav-tab" onclick="switchTab('analysis')">
                    <i class="fas fa-chart-line"></i> Analisis Teknikal
                </button>
                <button class="nav-tab" onclick="switchTab('history')">
                    <i class="fas fa-history"></i> Sejarah
                </button>
            </div>
        </div>
    </header>
    
    <main class="container">
        <!-- Tab 1: Top 20 Cryptocurrency -->
        <div id="crypto-tab" class="tab-content active">
            <h2 class="section-title">
                <i class="fas fa-list-ol"></i> Top 20 Cryptocurrency by Market Cap
            </h2>
            
            <div class="crypto-table">
                <div class="table-header">
                    <div>#</div>
                    <div>Coin</div>
                    <div>Harga</div>
                    <div>24h %</div>
                    <div>7d %</div>
                    <div>Market Cap</div>
                    <div>Volume (24h)</div>
                    <div>RSI (14)</div>
                    <div>Aksi</div>
                </div>
                <div id="crypto-table-body">
                    <!-- Data akan diisi oleh JavaScript -->
                </div>
            </div>
            
            <div class="chart-container">
                <div class="chart-header">
                    <div class="selected-coin">
                        <img id="selected-coin-icon" src="" alt="" class="coin-icon" style="display: none;">
                        <div>
                            <h3 id="selected-coin-name">Pilih coin untuk melihat chart</h3>
                            <div class="coin-price" id="selected-coin-price">$0.00</div>
                            <div id="selected-coin-change" class="price-change">0.00%</div>
                        </div>
                    </div>
                    <div class="chart-timeframes">
                        <button class="timeframe-btn" onclick="updateChart('1')">1H</button>
                        <button class="timeframe-btn" onclick="updateChart('24')">24H</button>
                        <button class="timeframe-btn active" onclick="updateChart('7')">7D</button>
                        <button class="timeframe-btn" onclick="updateChart('30')">30D</button>
                        <button class="timeframe-btn" onclick="updateChart('90')">90D</button>
                        <button class="timeframe-btn" onclick="updateChart('365')">1Y</button>
                    </div>
                </div>
                <canvas id="price-chart"></canvas>
            </div>
            
            <div class="indicators-grid">
                <div class="indicator-card">
                    <div class="indicator-title">RSI (14)</div>
                    <div class="indicator-value" id="rsi-value">50.0</div>
                    <div class="indicator-status status-neutral" id="rsi-status">Netral</div>
                </div>
                <div class="indicator-card">
                    <div class="indicator-title">EMA 13</div>
                    <div class="indicator-value" id="ema13-value">$0.00</div>
                    <div id="ema13-status">vs Harga: <span class="neutral">0.00%</span></div>
                </div>
                <div class="indicator-card">
                    <div class="indicator-title">EMA 21</div>
                    <div class="indicator-value" id="ema21-value">$0.00</div>
                    <div id="ema21-status">vs Harga: <span class="neutral">0.00%</span></div>
                </div>
                <div class="indicator-card">
                    <div class="indicator-title">EMA 50</div>
                    <div class="indicator-value" id="ema50-value">$0.00</div>
                    <div id="ema50-status">vs Harga: <span class="neutral">0.00%</span></div>
                </div>
            </div>
        </div>
        
        <!-- Tab 2: ETF Crypto -->
        <div id="etf-tab" class="tab-content">
            <h2 class="section-title">
                <i class="fas fa-chart-bar"></i> ETF Cryptocurrency
            </h2>
            
            <div class="etf-table">
                <div class="etf-row etf-header">
                    <div>Symbol</div>
                    <div>Nama ETF</div>
                    <div>Issuer</div>
                    <div>Harga</div>
                    <div>Perubahan</div>
                    <div>AUM</div>
                    <div>Inflow/Outflow (24h)</div>
                </div>
                <div id="etf-table-body">
                    <!-- Data ETF akan diisi oleh JavaScript -->
                </div>
            </div>
            
            <div class="chart-container">
                <h3 class="section-title">
                    <i class="fas fa-exchange-alt"></i> Perbandingan Inflow/Outflow ETF Bitcoin
                </h3>
                <canvas id="etf-flow-chart"></canvas>
            </div>
        </div>
        
        <!-- Tab 3: Emas & Logam Mulia -->
        <div id="gold-tab" class="tab-content">
            <h2 class="section-title">
                <i class="fas fa-gem"></i> Harga Emas & Logam Mulia
            </h2>
            
            <div class="gold-grid">
                <div class="gold-card">
                    <div class="gold-header">
                        <div>
                            <div class="text-xs">Emas Global (Spot)</div>
                            <div class="gold-price" id="gold-usd">$2,340.50</div>
                        </div>
                        <div class="gold-icon">ü•á</div>
                    </div>
                    <div class="mb-4">
                        <div class="text-sm">Perubahan 24h: <span class="positive" id="gold-change">+0.45%</span></div>
                        <div class="text-xs">High: $2,345.80 | Low: $2,335.20</div>
                    </div>
                    <div>
                        <div class="text-xs">Konversi ke IDR (Kurs: 1 USD = <span id="usd-idr">15,850</span>)</div>
                        <div class="text-lg font-bold" id="gold-idr">Rp 37,104,425</div>
                        <div class="text-xs">per ounce (31.1035 gram)</div>
                    </div>
                </div>
                
                <div class="gold-card">
                    <div class="gold-header">
                        <div>
                            <div class="text-xs">Emas Lokal (ANTAM)</div>
                            <div class="gold-price" id="gold-local">Rp 1,250,000</div>
                        </div>
                        <div class="gold-icon">üè¶</div>
                    </div>
                    <div class="mb-4">
                        <div class="text-sm">Per gram (24 karat)</div>
                        <div class="text-xs">Beli: <span id="gold-buy">Rp 1,240,000</span> | Jual: <span id="gold-sell">Rp 1,260,000</span></div>
                    </div>
                    <div>
                        <div class="text-sm">Perak (XAG/USD)</div>
                        <div class="text-lg font-bold" id="silver-price">$28.45</div>
                        <div class="text-xs">Perubahan: <span class="positive">+1.2%</span></div>
                    </div>
                </div>
                
                <div class="gold-card">
                    <div class="gold-header">
                        <div>
                            <div class="text-xs">Emas Digital</div>
                            <div class="gold-price" id="paxg-price">$2,338.75</div>
                        </div>
                        <div class="gold-icon">üîó</div>
                    </div>
                    <div class="mb-4">
                        <div class="text-sm">PAX Gold (PAXG)</div>
                        <div class="text-xs">Backed by 1 oz London Good Delivery gold</div>
                    </div>
                    <div>
                        <div class="text-sm">Tether Gold (XAUT)</div>
                        <div class="text-lg font-bold" id="xaut-price">$2,339.20</div>
                        <div class="text-xs">Perubahan: <span class="positive">+0.3%</span></div>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <h3 class="section-title">
                    <i class="fas fa-chart-line"></i> Perbandingan Emas vs Bitcoin (1 Tahun)
                </h3>
                <canvas id="gold-btc-chart"></canvas>
            </div>
        </div>
        
        <!-- Tab 4: Analisis Teknikal Detail -->
        <div id="analysis-tab" class="tab-content">
            <h2 class="section-title">
                <i class="fas fa-chart-line"></i> Analisis Teknikal Mendalam
            </h2>
            
            <div class="indicators-grid mb-6">
                <div class="indicator-card">
                    <div class="indicator-title">Trend Analysis</div>
                    <div class="indicator-value" id="trend-status">Uptrend</div>
                    <div class="indicator-status status-buy">Strong Buy Signal</div>
                    <div class="text-xs mt-4">EMA Alignment: Bullish</div>
                </div>
                <div class="indicator-card">
                    <div class="indicator-title">Volume Analysis</div>
                    <div class="indicator-value" id="volume-status">High</div>
                    <div class="indicator-status status-buy">Above Average</div>
                    <div class="text-xs mt-4">Volume/MA Ratio: 1.45</div>
                </div>
                <div class="indicator-card">
                    <div class="indicator-title">Momentum</div>
                    <div class="indicator-value" id="momentum-status">Strong</div>
                    <div class="indicator-status status-buy">Accelerating</div>
                    <div class="text-xs mt-4">MACD: Bullish Crossover</div>
                </div>
                <div class="indicator-card">
                    <div class="indicator-title">Volatility</div>
                    <div class="indicator-value" id="volatility-status">Medium</div>
                    <div class="indicator-status status-neutral">Normal Range</div>
                    <div class="text-xs mt-4">ATR: 4.2%</div>
                </div>
            </div>
            
            <div class="chart-container mb-6">
                <h3 class="section-title">
                    <i class="fas fa-wave-square"></i> Indikator Teknikal Multi-Timeframe
                </h3>
                <canvas id="technical-chart"></canvas>
            </div>
            
            <div class="history-container">
                <h3 class="section-title">
                    <i class="fas fa-lightbulb"></i> Trading Signals & Insights
                </h3>
                <div id="trading-signals">
                    <!-- Signals akan diisi oleh JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- Tab 5: Sejarah Crypto -->
        <div id="history-tab" class="tab-content">
            <h2 class="section-title">
                <i class="fas fa-history"></i> Sejarah & Fakta Cryptocurrency
            </h2>
            
            <div class="history-container">
                <div class="history-timeline" id="crypto-history">
                    <!-- Timeline akan diisi oleh JavaScript -->
                </div>
            </div>
            
            <div class="chart-container">
                <h3 class="section-title">
                    <i class="fas fa-fun-fact"></i> Fakta Unik & Trivia
                </h3>
                <div id="fun-facts">
                    <!-- Fakta unik akan diisi oleh JavaScript -->
                </div>
            </div>
        </div>
    </main>
    
    <footer class="container" style="margin-top: 50px; padding: 30px 0; border-top: 1px solid var(--border); text-align: center; color: var(--dim);">
        <p>CryptoVerse Pro - Dashboard Analytics Cryptocurrency, ETF & Logam Mulia</p>
        <p class="text-sm mt-4">Data sumber: CoinGecko API, Coinglass API, GoldAPI, dan sumber publik lainnya</p>
        <p class="text-xs mt-2">Data diperbarui setiap 5 menit | Hanya untuk tujuan edukasi</p>
    </footer>

    <script>
        // Konfigurasi dan State Management
        const config = {
            coinGeckoAPI: 'https://api.coingecko.com/api/v3',
            goldAPI: 'https://www.goldapi.io/api/XAU/USD', // Butuh API key
            exchangeAPI: 'https://api.exchangerate.host/latest?base=USD&symbols=IDR',
            updateInterval: 300000, // 5 menit
            maxRetries: 3
        };

        let state = {
            currentTab: 'crypto',
            selectedCoin: 'bitcoin',
            chartData: null,
            cryptoData: [],
            etfData: [],
            goldData: {},
            chartInstance: null,
            etfChartInstance: null,
            goldChartInstance: null,
            technicalChartInstance: null,
            lastUpdate: null
        };

        // Database statis untuk backup dan data tambahan
        const staticData = {
            cryptoHistory: {
                bitcoin: [
                    { year: "2008", event: "Satoshi Nakamoto menerbitkan whitepaper Bitcoin" },
                    { year: "2009", event: "Genesis block ditambang, transaksi pertama terjadi" },
                    { year: "2010", event: "Pizza Day: 10,000 BTC untuk 2 pizza" },
                    { year: "2013", event: "Harga mencapai $1,000 pertama kali" },
                    { year: "2017", event: "Bull run besar, harga mencapai $20,000" },
                    { year: "2021", event: "ATH $69,000, ETF Bitcoin disetujui" },
                    { year: "2024", event: "Halving ke-4, reward blok menjadi 3.125 BTC" }
                ],
                ethereum: [
                    { year: "2013", event: "Vitalik Buterin mengusulkan Ethereum" },
                    { year: "2015", event: "Mainnet Ethereum diluncurkan" },
                    { year: "2016", event: "DAO Hack menyebabkan hard fork" },
                    { year: "2020", event: "Ethereum 2.0 dimulai dengan Beacon Chain" },
                    { year: "2022", event: "The Merge: Beralih ke Proof-of-Stake" },
                    { year: "2023", event: "Shapella upgrade memungkinkan penarikan staking" }
                ]
            },
            
            funFacts: [
                "Satoshi Nakamoto memiliki ~1 juta BTC yang belum pernah disentuh",
                "Jika kehilangan private key, BTC hilang selamanya - diperkirakan 4 juta BTC hilang",
                "Bitcoin mining menggunakan lebih banyak energi daripada negara Argentina",
                "Ethereum disebut 'world computer' karena menjalankan smart contracts",
                "Vitalik Buterin menciptakan Ethereum saat berusia 19 tahun",
                "Blockchain pertama dibuat pada 1991, jauh sebelum Bitcoin",
                "Cryptocurrency pertama adalah DigiCash (1989), bukan Bitcoin",
                "NFT pertama dibuat pada 2014 di blockchain Ethereum",
                "El Salvador adalah negara pertama yang mengadopsi Bitcoin sebagai legal tender",
                "Sekitar 2% populasi global memiliki cryptocurrency"
            ],
            
            etfList: [
                { symbol: "IBIT", name: "iShares Bitcoin Trust", issuer: "BlackRock", price: 42.50, change: 2.3, aum: 18500000000, flow: 250000000 },
                { symbol: "FBTC", name: "Fidelity Wise Origin", issuer: "Fidelity", price: 62.89, change: 1.9, aum: 9500000000, flow: 180000000 },
                { symbol: "GBTC", name: "Grayscale Bitcoin Trust", issuer: "Grayscale", price: 58.42, change: -0.5, aum: 23500000000, flow: -50000000 },
                { symbol: "BITB", name: "Bitwise Bitcoin ETF", issuer: "Bitwise", price: 28.76, change: 2.3, aum: 2200000000, flow: 75000000 },
                { symbol: "ARKB", name: "ARK 21Shares Bitcoin ETF", issuer: "ARK Invest", price: 65.34, change: 2.1, aum: 3100000000, flow: 60000000 },
                { symbol: "ETHE", name: "Grayscale Ethereum Trust", issuer: "Grayscale", price: 32.45, change: 1.5, aum: 8500000000, flow: 30000000 },
                { symbol: "ETHW", name: "Bitwise Ethereum ETF", issuer: "Bitwise", price: 24.18, change: 1.8, aum: 450000000, flow: 15000000 }
            ]
        };

        // Fungsi Utama
        async function init() {
            updateTimestamp();
            loadCryptoData();
            loadETFData();
            loadGoldData();
            setupEventListeners();
            
            // Auto-refresh setiap 5 menit
            setInterval(() => {
                refreshAllData();
            }, config.updateInterval);
        }

        // Fungsi untuk beralih tab
        function switchTab(tabName) {
            // Update UI
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            event.target.classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
            state.currentTab = tabName;
            
            // Load data spesifik tab jika diperlukan
            if (tabName === 'history') {
                loadHistoryData();
            }
        }

        // Load data cryptocurrency
        async function loadCryptoData() {
            try {
                showLoading('crypto-table-body', 20);
                
                // Gunakan CoinGecko API untuk top 20 market cap
                const response = await fetch(`${config.coinGeckoAPI}/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=20&page=1&sparkline=true&price_change_percentage=24h%2C7d`);
                
                if (!response.ok) throw new Error('API CoinGecko tidak merespon');
                
                const data = await response.json();
                state.cryptoData = data;
                
                renderCryptoTable(data);
                updateGlobalStats(data);
                
                // Pilih Bitcoin sebagai default
                if (!state.selectedCoin && data.length > 0) {
                    selectCoin(data[0].id, data[0]);
                }
                
            } catch (error) {
                console.error('Error loading crypto data:', error);
                // Fallback ke data statis
                loadStaticCryptoData();
            }
        }

        // Render tabel cryptocurrency
        function renderCryptoTable(data) {
            const tableBody = document.getElementById('crypto-table-body');
            tableBody.innerHTML = '';
            
            data.forEach((coin, index) => {
                const row = document.createElement('div');
                row.className = `table-row ${coin.id === state.selectedCoin ? 'active' : ''}`;
                row.onclick = () => selectCoin(coin.id, coin);
                
                const change24h = coin.price_change_percentage_24h || 0;
                const change7d = coin.price_change_percentage_7d_in_currency || 0;
                
                // Hitung RSI sederhana (dummy calculation untuk demo)
                const rsi = calculateSimpleRSI(coin);
                
                row.innerHTML = `
                    <div>${index + 1}</div>
                    <div class="coin-info">
                        <img src="${coin.image}" alt="${coin.name}" class="coin-icon" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNiIgZmlsbD0iIzNiODJmNiIvPHRleHQgeD0iMTYiIHk9IjIxIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIxMiIgZm9udC13ZWlnaHQ9ImJvbGQiPiR7Y29pbi5zeW1ib2wuc2xpY2UoMCwyKS50b1VwcGVyQ2FzZSgpfTwvdGV4dD48L3N2Zz4K'">
                        <div>
                            <div class="coin-name">${coin.name}</div>
                            <div class="coin-symbol">${coin.symbol.toUpperCase()}</div>
                        </div>
                    </div>
                    <div>$${formatNumber(coin.current_price)}</div>
                    <div>
                        <span class="price-change ${change24h >= 0 ? 'positive' : 'negative'}">
                            ${change24h >= 0 ? '+' : ''}${change24h.toFixed(2)}%
                        </span>
                    </div>
                    <div class="${change7d >= 0 ? 'positive' : 'negative'}">
                        ${change7d >= 0 ? '+' : ''}${change7d.toFixed(2)}%
                    </div>
                    <div>$${formatMarketCap(coin.market_cap)}</div>
                    <div>$${formatNumber(coin.total_volume)}</div>
                    <div>${rsi.toFixed(1)}</div>
                    <div>
                        <button class="timeframe-btn" onclick="event.stopPropagation(); selectCoin('${coin.id}', ${JSON.stringify(coin).replace(/"/g, '&quot;')})">
                            <i class="fas fa-chart-line"></i>
                        </button>
                    </div>
                `;
                
                tableBody.appendChild(row);
            });
        }

        // Pilih coin untuk ditampilkan detail
        async function selectCoin(coinId, coinData = null) {
            state.selectedCoin = coinId;
            
            // Update UI
            document.querySelectorAll('.table-row').forEach(row => {
                row.classList.remove('active');
            });
            
            // Cari row yang sesuai
            const rows = document.querySelectorAll('.table-row');
            rows.forEach(row => {
                if (row.querySelector('.coin-name')?.textContent === coinData?.name) {
                    row.classList.add('active');
                }
            });
            
            // Update header coin
            const coin = coinData || state.cryptoData.find(c => c.id === coinId);
            if (coin) {
                document.getElementById('selected-coin-name').textContent = coin.name;
                document.getElementById('selected-coin-price').textContent = `$${formatNumber(coin.current_price)}`;
                
                const change = coin.price_change_percentage_24h || 0;
                const changeEl = document.getElementById('selected-coin-change');
                changeEl.textContent = `${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
                changeEl.className = `price-change ${change >= 0 ? 'positive' : 'negative'}`;
                
                const icon = document.getElementById('selected-coin-icon');
                icon.src = coin.image;
                icon.style.display = 'block';
                
                // Load chart dan indikator
                loadCoinChart(coinId);
                updateTechnicalIndicators(coin);
                loadCoinHistory(coinId);
            }
        }

        // Load chart untuk coin
        async function loadCoinChart(coinId, days = '7') {
            try {
                const response = await fetch(`${config.coinGeckoAPI}/coins/${coinId}/market_chart?vs_currency=usd&days=${days}`);
                const data = await response.json();
                
                state.chartData = data.prices;
                renderPriceChart(data.prices, days);
                updateTechnicalAnalysis(data.prices);
                
            } catch (error) {
                console.error('Error loading chart:', error);
                // Fallback: generate dummy data
                generateDummyChart(coinId, days);
            }
        }

        // Render chart harga
        function renderPriceChart(prices, timeframe) {
            const ctx = document.getElementById('price-chart').getContext('2d');
            
            if (state.chartInstance) {
                state.chartInstance.destroy();
            }
            
            const labels = prices.map((_, i) => {
                if (timeframe === '1') return `${i}:00`;
                if (timeframe === '24') return `${i}:00`;
                return `Day ${i + 1}`;
            });
            
            const dataPoints = prices.map(p => p[1]);
            const firstPrice = dataPoints[0];
            const lastPrice = dataPoints[dataPoints.length - 1];
            const isUp = lastPrice >= firstPrice;
            
            state.chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Harga',
                        data: dataPoints,
                        borderColor: isUp ? '#10b981' : '#ef4444',
                        backgroundColor: isUp ? 'rgba(16, 185, 129, 0.1)' : 'rgba(239, 68, 68, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        x: {
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { color: '#94a3b8' }
                        },
                        y: {
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: { 
                                color: '#94a3b8',
                                callback: function(value) {
                                    return '$' + formatNumber(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        // Update chart berdasarkan timeframe
        function updateChart(days) {
            // Update active button
            document.querySelectorAll('.timeframe-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadCoinChart(state.selectedCoin, days);
        }

        // Update indikator teknikal
        function updateTechnicalIndicators(coin) {
            // RSI
            const rsi = calculateSimpleRSI(coin);
            document.getElementById('rsi-value').textContent = rsi.toFixed(1);
            
            const rsiStatus = document.getElementById('rsi-status');
            if (rsi > 70) {
                rsiStatus.textContent = 'Overbought';
                rsiStatus.className = 'indicator-status status-sell';
            } else if (rsi < 30) {
                rsiStatus.textContent = 'Oversold';
                rsiStatus.className = 'indicator-status status-buy';
            } else {
                rsiStatus.textContent = 'Netral';
                rsiStatus.className = 'indicator-status status-neutral';
            }
            
            // EMA Calculations (simulated)
            const price = coin.current_price;
            const ema13 = price * (0.98 + Math.random() * 0.04);
            const ema21 = price * (0.97 + Math.random() * 0.06);
            const ema50 = price * (0.95 + Math.random() * 0.1);
            
            document.getElementById('ema13-value').textContent = `$${formatNumber(ema13)}`;
            document.getElementById('ema21-value').textContent = `$${formatNumber(ema21)}`;
            document.getElementById('ema50-value').textContent = `$${formatNumber(ema50)}`;
            
            updateEMAStatus('ema13', price, ema13);
            updateEMAStatus('ema21', price, ema21);
            updateEMAStatus('ema50', price, ema50);
        }

        function updateEMAStatus(id, price, ema) {
            const diff = ((price - ema) / ema) * 100;
            const statusEl = document.getElementById(`${id}-status`);
            const span = statusEl.querySelector('span');
            
            span.textContent = `${diff >= 0 ? '+' : ''}${diff.toFixed(2)}%`;
            span.className = diff >= 0 ? 'positive' : 'negative';
        }

        // Analisis teknikal lebih detail
        function updateTechnicalAnalysis(prices) {
            const priceData = prices.map(p => p[1]);
            
            // Simple calculations
            const currentPrice = priceData[priceData.length - 1];
            const minPrice = Math.min(...priceData);
            const maxPrice = Math.max(...priceData);
            const priceRange = ((currentPrice - minPrice) / (maxPrice - minPrice)) * 100;
            
            // Update status
            document.getElementById('trend-status').textContent = priceRange > 50 ? 'Uptrend' : 'Downtrend';
            document.getElementById('volume-status').textContent = 'High';
            document.getElementById('momentum-status').textContent = priceRange > 60 ? 'Strong' : 'Weak';
            document.getElementById('volatility-status').textContent = 'Medium';
        }

        // Load data ETF
        async function loadETFData() {
            try {
                // Coinglass API untuk ETF data
                // Note: Coinglass mungkin memerlukan API key untuk production
                // Fallback ke data statis jika gagal
                
                showLoading('etf-table-body', 7);
                
                // Simulasi data ETF (gunakan data statis)
                state.etfData = staticData.etfList;
                renderETFTable(state.etfData);
                renderETFChart();
                
            } catch (error) {
                console.error('Error loading ETF data:', error);
                loadStaticETFData();
            }
        }

        function renderETFTable(data) {
            const tableBody = document.getElementById('etf-table-body');
            tableBody.innerHTML = '';
            
            data.forEach(etf => {
                const row = document.createElement('div');
                row.className = 'etf-row';
                
                row.innerHTML = `
                    <div><strong>${etf.symbol}</strong></div>
                    <div>${etf.name}</div>
                    <div>${etf.issuer}</div>
                    <div>$${etf.price.toFixed(2)}</div>
                    <div class="${etf.change >= 0 ? 'positive' : 'negative'}">
                        ${etf.change >= 0 ? '+' : ''}${etf.change.toFixed(2)}%
                    </div>
                    <div>$${formatNumber(etf.aum)}</div>
                    <div class="${etf.flow >= 0 ? 'inflow' : 'outflow'}">
                        ${etf.flow >= 0 ? '+' : ''}$${formatNumber(Math.abs(etf.flow))}
                    </div>
                `;
                
                tableBody.appendChild(row);
            });
        }

        function renderETFChart() {
            const ctx = document.getElementById('etf-flow-chart').getContext('2d');
            
            if (state.etfChartInstance) {
                state.etfChartInstance.destroy();
            }
            
            const labels = state.etfData.map(etf => etf.symbol);
            const inflows = state.etfData.map(etf => etf.flow >= 0 ? etf.flow : 0);
            const outflows = state.etfData.map(etf => etf.flow < 0 ? Math.abs(etf.flow) : 0);
            
            state.etfChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Inflow',
                            data: inflows,
                            backgroundColor: '#10b981',
                            borderColor: '#10b981',
                            borderWidth: 1
                        },
                        {
                            label: 'Outflow',
                            data: outflows,
                            backgroundColor: '#ef4444',
                            borderColor: '#ef4444',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Daily ETF Flow (USD)'
                        }
                    },
                    scales: {
                        x: {
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        y: {
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + formatNumber(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        // Load data emas
        async function loadGoldData() {
            try {
                // GoldAPI (perlu API key)
                // Untuk demo, gunakan data statis dengan sedikit variasi
                
                const usdIdr = await getExchangeRate();
                
                // Update gold prices
                const goldPrice = 2340.50 + (Math.random() - 0.5) * 10;
                const goldChange = 0.45 + (Math.random() - 0.5) * 0.3;
                const goldIdr = goldPrice * usdIdr;
                const goldPerGram = goldIdr / 31.1035;
                
                document.getElementById('gold-usd').textContent = `$${goldPrice.toFixed(2)}`;
                document.getElementById('gold-change').textContent = `${goldChange >= 0 ? '+' : ''}${goldChange.toFixed(2)}%`;
                document.getElementById('gold-change').className = goldChange >= 0 ? 'positive' : 'negative';
                document.getElementById('usd-idr').textContent = formatNumber(usdIdr, 0);
                document.getElementById('gold-idr').textContent = `Rp ${formatNumber(goldIdr, 0)}`;
                
                // Local gold prices
                const localGold = 1250000 + (Math.random() - 0.5) * 20000;
                document.getElementById('gold-local').textContent = `Rp ${formatNumber(localGold, 0)}`;
                document.getElementById('gold-buy').textContent = `Rp ${formatNumber(localGold * 0.99, 0)}`;
                document.getElementById('gold-sell').textContent = `Rp ${formatNumber(localGold * 1.01, 0)}`;
                
                // Digital gold
                document.getElementById('paxg-price').textContent = `$${(goldPrice * 0.999).toFixed(2)}`;
                document.getElementById('xaut-price').textContent = `$${(goldPrice * 1.001).toFixed(2)}`;
                
                // Silver
                const silverPrice = 28.45 + (Math.random() - 0.5) * 0.5;
                document.getElementById('silver-price').textContent = `$${silverPrice.toFixed(2)}`;
                
                // Render gold vs BTC chart
                renderGoldBTCChart();
                
            } catch (error) {
                console.error('Error loading gold data:', error);
                // Fallback ke data statis
            }
        }

        async function getExchangeRate() {
            try {
                const response = await fetch(config.exchangeAPI);
                const data = await response.json();
                return data.rates.IDR || 15850;
            } catch (error) {
                return 15850; // Fallback rate
            }
        }

        function renderGoldBTCChart() {
            const ctx = document.getElementById('gold-btc-chart').getContext('2d');
            
            if (state.goldChartInstance) {
                state.goldChartInstance.destroy();
            }
            
            // Generate dummy data for comparison
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const goldPrices = [];
            const btcPrices = [];
            
            let goldBase = 1800;
            let btcBase = 25000;
            
            for (let i = 0; i < 12; i++) {
                goldBase *= (1 + (Math.random() - 0.45) * 0.05);
                btcBase *= (1 + (Math.random() - 0.4) * 0.15);
                
                goldPrices.push(goldBase);
                btcPrices.push(btcBase / 1000); // Scale down for better visualization
            }
            
            state.goldChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: 'Gold (USD/oz)',
                            data: goldPrices,
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            borderWidth: 2,
                            tension: 0.4
                        },
                        {
                            label: 'Bitcoin (USD/1000)',
                            data: btcPrices,
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 2,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        x: {
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        y: {
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            ticks: {
                                callback: function(value) {
                                    return '$' + formatNumber(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        // Load sejarah crypto
        function loadHistoryData() {
            const historyContainer = document.getElementById('crypto-history');
            const funFactsContainer = document.getElementById('fun-facts');
            
            // Load Bitcoin history by default
            const history = staticData.cryptoHistory.bitcoin;
            historyContainer.innerHTML = history.map(event => `
                <div class="history-event">
                    <div class="event-year">${event.year}</div>
                    <div class="event-desc">${event.event}</div>
                </div>
            `).join('');
            
            // Load fun facts
            funFactsContainer.innerHTML = staticData.funFacts.map(fact => `
                <div style="padding: 15px; background: rgba(255,255,255,0.05); border-radius: 8px; margin-bottom: 10px;">
                    <i class="fas fa-lightbulb" style="color: #f59e0b; margin-right: 10px;"></i>
                    ${fact}
                </div>
            `).join('');
        }

        function loadCoinHistory(coinId) {
            const history = staticData.cryptoHistory[coinId] || staticData.cryptoHistory.bitcoin;
            
            if (state.currentTab === 'history') {
                const historyContainer = document.getElementById('crypto-history');
                historyContainer.innerHTML = history.map(event => `
                    <div class="history-event">
                        <div class="event-year">${event.year}</div>
                        <div class="event-desc">${event.event}</div>
                    </div>
                `).join('');
            }
        }

        // Update global stats
        function updateGlobalStats(data) {
            if (!data || data.length === 0) return;
            
            const totalMarketCap = data.reduce((sum, coin) => sum + coin.market_cap, 0);
            const totalVolume = data.reduce((sum, coin) => sum + coin.total_volume, 0);
            const btcDominance = data.find(c => c.id === 'bitcoin')?.market_cap / totalMarketCap * 100 || 50;
            
            document.getElementById('global-mcap').textContent = `$${formatMarketCap(totalMarketCap)}`;
            document.getElementById('global-volume').textContent = `$${formatNumber(totalVolume)}`;
            document.getElementById('btc-dominance').textContent = `${btcDominance.toFixed(1)}%`;
            
            // Fear & Greed Index (simulated)
            const fearGreed = 40 + Math.random() * 60;
            document.getElementById('fear-greed').textContent = Math.round(fearGreed);
        }

        // Refresh semua data
        function refreshAllData() {
            loadCryptoData();
            loadETFData();
            loadGoldData();
            updateTimestamp();
        }

        function updateTimestamp() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('id-ID', { 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            const dateString = now.toLocaleDateString('id-ID', {
                day: 'numeric',
                month: 'short',
                year: 'numeric'
            });
            
            document.getElementById('update-time').textContent = `${dateString} ${timeString}`;
        }

        // Helper functions
        function formatNumber(num, decimals = 2) {
            if (num >= 1e9) {
                return (num / 1e9).toFixed(decimals) + 'B';
            }
            if (num >= 1e6) {
                return (num / 1e6).toFixed(decimals) + 'M';
            }
            if (num >= 1e3) {
                return (num / 1e3).toFixed(decimals) + 'K';
            }
            return num.toFixed(decimals);
        }

        function formatMarketCap(num) {
            if (num >= 1e12) {
                return (num / 1e12).toFixed(2) + 'T';
            }
            if (num >= 1e9) {
                return (num / 1e9).toFixed(2) + 'B';
            }
            return formatNumber(num);
        }

        function calculateSimpleRSI(coin) {
            // Simple RSI calculation based on 24h price change
            const change = coin.price_change_percentage_24h || 0;
            const baseRSI = 50 + (change * 2); // Simple approximation
            return Math.min(Math.max(baseRSI, 0), 100);
        }

        function showLoading(elementId, rows = 5) {
            const element = document.getElementById(elementId);
            if (!element) return;
            
            let html = '';
            for (let i = 0; i < rows; i++) {
                html += `
                    <div style="padding: 15px 20px; border-bottom: 1px solid var(--border);">
                        <div class="skeleton" style="height: 20px; width: 100%; border-radius: 4px;"></div>
                    </div>
                `;
            }
            element.innerHTML = html;
        }

        function generateDummyChart(coinId, days) {
            const prices = [];
            let price = 50000;
            const now = Date.now();
            
            for (let i = 0; i < 100; i++) {
                price *= (1 + (Math.random() - 0.5) * 0.05);
                const timestamp = now - (100 - i) * 86400000 * (days / 7);
                prices.push([timestamp, price]);
            }
            
            state.chartData = prices;
            renderPriceChart(prices, days);
        }

        function loadStaticCryptoData() {
            // Fallback static data untuk demo
            const staticCoins = [
                { id: 'bitcoin', name: 'Bitcoin', symbol: 'btc', current_price: 65432, price_change_percentage_24h: 2.5, market_cap: 1280000000000, total_volume: 28500000000, image: 'https://coin-images.coingecko.com/coins/images/1/large/bitcoin.png' },
                { id: 'ethereum', name: 'Ethereum', symbol: 'eth', current_price: 3456, price_change_percentage_24h: 1.8, market_cap: 415000000000, total_volume: 14500000000, image: 'https://coin-images.coingecko.com/coins/images/279/large/ethereum.png' },
                // ... tambahkan lebih banyak coin
            ];
            
            state.cryptoData = staticCoins;
            renderCryptoTable(staticCoins);
            updateGlobalStats(staticCoins);
            
            if (staticCoins.length > 0) {
                selectCoin(staticCoins[0].id, staticCoins[0]);
            }
        }

        function loadStaticETFData() {
            state.etfData = staticData.etfList;
            renderETFTable(state.etfData);
            renderETFChart();
        }

        function setupEventListeners() {
            // Event listener untuk resize chart
            window.addEventListener('resize', () => {
                if (state.chartInstance) {
                    state.chartInstance.resize();
                }
                if (state.etfChartInstance) {
                    state.etfChartInstance.resize();
                }
                if (state.goldChartInstance) {
                    state.goldChartInstance.resize();
                }
            });
        }

        // Inisialisasi aplikasi saat DOM siap
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
```
